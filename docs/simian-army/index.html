<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.13.0 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>The Simian Army - Overview and Resources - Gremlin: Chaos Monkey</title>
<meta name="description" content="Details what the Simian Army is and how it relates to the more well known topic of Chaos Monkey.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Gremlin: Chaos Monkey">
<meta property="og:title" content="The Simian Army - Overview and Resources">
<meta property="og:url" content="http://localhost:4000/gremlin-chaos-monkey/simian-army/">








  <meta property="article:published_time" content="2018-09-12T00:00:00-07:00">





  

  


<link rel="canonical" href="http://localhost:4000/gremlin-chaos-monkey/simian-army/">







  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Gabe Wyatt",
      "url": "http://localhost:4000/gremlin-chaos-monkey",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/gremlin-chaos-monkey/feed.xml" type="application/atom+xml" rel="alternate" title="Gremlin: Chaos Monkey Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/gremlin-chaos-monkey/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->
<link rel="icon" href="https://www.gremlin.com/favicon-32x32.png" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/gremlin-chaos-monkey/">Gremlin: Chaos Monkey</a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/gremlin-chaos-monkey/notes">Notes to Editor</a>
            </li>
<li class="masthead__menu-item">
              <a href="https://drive.google.com/drive/folders/16PhHEJGZtF428eyko_6-2BxpDGAU9JhW?usp=sharing" target="_blank" rel="noopener noreferrer">Google Drive Exports</a>
            </li>
</ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="http://localhost:4000/gremlin-chaos-monkey/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1">
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">The Simian Army - Overview and Resources</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox">
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Hub Pages</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/" class="">Chaos Monkey Guide for Engineers</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/origin-netflix" class="">The Origin of Chaos Monkey</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/developer-tutorial" class="">Chaos Monkey Tutorial</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/advanced-tips" class="">Advanced Developer Guide</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/simian-army" class="">The Simian Army</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/downloads-resources" class="">Chaos Monkey Resources</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/alternatives" class="">Chaos Monkey Alternatives</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Alternatives</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/alternatives/azure" class="">Azure</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/alternatives/docker" class="">Docker</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/alternatives/google-cloud-platform" class="">Google Cloud Platform</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/alternatives/kubernetes" class="">Kubernetes</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/alternatives/openshift" class="">OpenShift</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/alternatives/private-cloud" class="">Private Cloud</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/alternatives/spring-boot" class="">Spring Boot</a></li>
          
            
            

            
            

            <li><a href="/gremlin-chaos-monkey/alternatives/vmware" class="">VMWare</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="The Simian Army - Overview and Resources">
    
    <meta itemprop="datePublished" content="September 12, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">The Simian Army - Overview and Resources
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  13 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title">
<i class="fas fa-file-alt"></i> </h4></header>
              <ul class="toc__menu">
  <li>
<a href="#simian-army-members">Simian Army Members</a>
    <ul>
      <li>
<a href="#active-simians">Active Simians</a>
        <ul>
          <li><a href="#janitor-monkey">Janitor Monkey</a></li>
          <li><a href="#conformity-monkey">Conformity Monkey</a></li>
          <li><a href="#security-monkey">Security Monkey</a></li>
        </ul>
      </li>
      <li>
<a href="#inactiveprivate-simians">Inactive/Private Simians</a>
        <ul>
          <li><a href="#chaos-gorilla">Chaos Gorilla</a></li>
          <li><a href="#chaos-kong">Chaos Kong</a></li>
          <li><a href="#latency-monkey">Latency Monkey</a></li>
          <li><a href="#doctor-monkey">Doctor Monkey</a></li>
        </ul>
      </li>
      <li><a href="#10-18-monkey">10-18 Monkey</a></li>
    </ul>
  </li>
  <li>
<a href="#simian-chaos-strategies">Simian Chaos Strategies</a>
    <ul>
      <li>
<a href="#instance-shutdown-simius-mortus">Instance Shutdown (Simius Mortus)</a>
        <ul>
          <li><a href="#configuration-key">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#network-traffic-blocker-simius-quies">Network Traffic Blocker (Simius Quies)</a>
        <ul>
          <li><a href="#configuration-key-1">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#ebs-volume-detachment-simius-amputa">EBS Volume Detachment (Simius Amputa)</a>
        <ul>
          <li><a href="#configuration-key-2">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#burn-cpu-simius-cogitarius">Burn-CPU (Simius Cogitarius)</a>
        <ul>
          <li><a href="#configuration-key-3">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#burn-io-simius-occupatus">Burn-IO (Simius Occupatus)</a>
        <ul>
          <li><a href="#configuration-key-4">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#fill-disk-simius-plenus">Fill Disk (Simius Plenus)</a>
        <ul>
          <li><a href="#configuration-key-5">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#kill-processes-simius-delirius">Kill Processes (Simius Delirius)</a>
        <ul>
          <li><a href="#configuration-key-6">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#null-route-simius-desertus">Null-Route (Simius Desertus)</a>
        <ul>
          <li><a href="#configuration-key-7">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#fail-dns-simius-nonomenius">Fail DNS (Simius Nonomenius)</a>
        <ul>
          <li><a href="#configuration-key-8">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#fail-ec2-api-simius-noneccius">Fail EC2 API (Simius Noneccius)</a>
        <ul>
          <li><a href="#configuration-key-9">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#fail-s3-api-simius-amnesius">Fail S3 API (Simius Amnesius)</a>
        <ul>
          <li><a href="#configuration-key-10">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#fail-dynamodb-api-simius-nodynamus">Fail DynamoDB API (Simius Nodynamus)</a>
        <ul>
          <li><a href="#configuration-key-11">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#network-corruption-simius-politicus">Network Corruption (Simius Politicus)</a>
        <ul>
          <li><a href="#configuration-key-12">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#network-latency-simius-tardus">Network Latency (Simius Tardus)</a>
        <ul>
          <li><a href="#configuration-key-13">Configuration Key</a></li>
        </ul>
      </li>
      <li>
<a href="#network-loss-simius-perditus">Network Loss (Simius Perditus)</a>
        <ul>
          <li><a href="#configuration-key-14">Configuration Key</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
<a href="#using-simian-army-tools">Using Simian Army Tools</a>
    <ul>
      <li><a href="#prerequisites">Prerequisites</a></li>
      <li>
<a href="#installation">Installation</a>
        <ul>
          <li><a href="#receiving-email-notifications">Receiving Email Notifications</a></li>
        </ul>
      </li>
      <li><a href="#configuration">Configuration</a></li>
      <li>
<a href="#executing-experiments">Executing Experiments</a>
        <ul>
          <li><a href="#using-chaos-monkey-1x">Using Chaos Monkey 1.X</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#next-steps">Next Steps</a></li>
</ul>
            </nav>
          </aside>
        
        <p>The <strong>Simian Army</strong> is a suite of failure-inducing tools designed to add more capabilities beyond <a href="/gremlin-chaos-monkey/origin-netflix">Chaos Monkey</a>.  While Chaos Monkey solely handles termination of random instances, Netflix engineers needed additional tools able to induce <em>other</em> types of failure.  Some of the Simian Army tools have fallen out of favor in recent years, but each of the members serves a specific purpose aimed at bolstering a system’s failure resilience.</p>

<p>In this chapter we’ll jump into <a href="/gremlin-chaos-monkey/simian-army#simian-army-members">each member</a> of the Simian Army and examine how these tools helped shaped modern Chaos Engineering best practices.  We’ll also explore each of the Simian <a href="/gremlin-chaos-monkey/simian-army#simian-chaos-strategies">Chaos Strategies</a> used to define which Chaos Experiments the system should undergo.  Lastly, we’ll plunge into a short <a href="/gremlin-chaos-monkey/simian-army#using-simian-army-tools">tutorial</a> walking through the basics of installing and using the Simian Army toolset.</p>

<h2 id="simian-army-members">Simian Army Members</h2>

<p>Each Simian Army member was built to perform a small yet precise Chaos Experiment.  Results from these tiny tests can be easily measured and acted upon, allowing you and your team to quickly adapt.  By performing frequent, intentional failures within your own systems, you’re able to create a more fault-tolerant application.</p>

<h3 id="active-simians">Active Simians</h3>

<p>In addition to <a href="/gremlin-chaos-monkey/origin-netflix">Chaos Monkey</a>, the following simian trio are the only Army personnel to be publicly released, and which remain available for use today.</p>

<h4 id="janitor-monkey">Janitor Monkey</h4>

<p><strong>Janitor Monkey</strong> also seeks out and disposes of unused resources within the cloud.  It checks any given resource against a set of configurable rules to determine if its an eligible candidate for cleanup.  Janitor Monkey features a number of <a href="https://github.com/Netflix/SimianArmy/wiki/Janitor-Settings" target="_blank" rel="noopener noreferrer">configurable options</a>, but the default behavior looks for resources like orphaned (non-auto-scaled) instances, volumes that are not attached to an instance, unused auto-scaling groups, and more.</p>

<p>Have a look at <a href="/gremlin-chaos-monkey/simian-army#using-simian-army-tools">Using Simian Army Tools</a> for a basic guide configuring and executing Janitor Monkey experiments.</p>

<p><img src="../images/simian-army-janitor-monkey.png" alt="simian-army-janitor-monkey" title="A magnificent Janitor Monkey"></p>

<h4 id="conformity-monkey">Conformity Monkey</h4>

<p>The <strong>Conformity Monkey</strong> is similar to <strong>Janitor Monkey</strong> – it seeks out instances that don’t conform to predefined rule sets and shuts them down.  Here are a few of the non-conformities that Conformity Monkey looks for.</p>

<ul>
  <li>Auto-scaling groups and their associated elastic load balancers that have mismatched availability zones.</li>
  <li>Clustered instances that are not contained in required security groups.</li>
  <li>Instances that are older than a certain age threshold.</li>
</ul>

<p>Conformity Monkey capabilities have also been rolled into <a href="/gremlin-chaos-monkey/advanced-tips#how-to-manually-deploy-spinnaker-for-chaos-monkey">Spinnaker</a>.  More info on using Conformity Monkey can be found under <a href="/gremlin-chaos-monkey/simian-army#using-simian-army-tools">Using Simian Army Tools</a>.</p>

<h4 id="security-monkey">Security Monkey</h4>

<p><strong>Security Monkey</strong> was originally created as an extension to Conformity Monkey, and it locates potential security vulnerabilities and violations.  It has since broken off into a self-contained, standalone, <a href="https://github.com/Netflix/security_monkey" target="_blank" rel="noopener noreferrer">open-source project</a>.  The current 1.X version is capable of monitoring many common cloud provider accounts for policy changes and insecure configurations.  It also ships with a single-page application web interface.</p>

<h3 id="inactiveprivate-simians">Inactive/Private Simians</h3>

<p>This group of simians were either been deprecated or were never publicly released.</p>

<h4 id="chaos-gorilla">Chaos Gorilla</h4>

<p>AWS Cloud resources are <a href="https://aws.amazon.com/about-aws/global-infrastructure/" target="_blank" rel="noopener noreferrer">distributed</a> around the world, with a current total of <code class="highlighter-rouge">18</code> geographic <strong>Regions</strong>.  Each region consists of one or more <strong>Availability Zones</strong>.  Each availability zone acts as a separated private network of redundancy, communicating with one another via fiber within their given region.</p>

<p>The <strong>Chaos Gorilla</strong> tool simulates the outage of entire AWS availability zone.  It’s been successfully used by Netflix to verify that their service load balancers functioned properly and kept services running, even in the event of an availability zone failure.</p>

<h4 id="chaos-kong">Chaos Kong</h4>

<p>While rare, it is <a href="https://aws.amazon.com/message/5467D2/" target="_blank" rel="noopener noreferrer">not unheard of</a> for an AWS region to experience outages.  Though <a href="/gremlin-chaos-monkey/simian-army#chaos-gorilla">Chaos Gorilla</a> simulates availability zone outages, Netflix later created <strong>Chaos Kong</strong> to simulate region outages.  As Netflix discusses <a href="https://medium.com/netflix-techblog/chaos-engineering-upgraded-878d341f15fa" target="_blank" rel="noopener noreferrer">in their blog</a>, running frequent Chaos Kong experiments prior to any actual regional outages ensured that their systems were able to successfully evacuate traffic from the failing region into a nominal region, without suffering any severe degradation.</p>

<p><img src="../images/simian-army-netflix-chaos-kong-experiment.png" alt="simian-army-netflix-chaos-kong-experiment" title="Netflix Chaos Kong Experiment Chart -- Courtesy Netflix"></p>

<p><em>Netflix Chaos Kong Experiment - <strong>Courtesy of Netflix</strong></em></p>

<h4 id="latency-monkey">Latency Monkey</h4>

<p>Easily the <a href="https://medium.com/netflix-techblog/fit-failure-injection-testing-35d8e2a9bb2#7c1b" target="_blank" rel="noopener noreferrer">most problematic</a> Simian Army member Netflix devised, <strong>Latency Monkey</strong> causes artificial delays in RESTful client-server communications.  By simulating network delays and/or failures, services can be tested to see how they react when their dependencies slow down or fail to respond.</p>

<p>While Netflix never publicly released the Latency Monkey code, and it eventually evolved into their Failure Injection Testing (FIT) service, which we discuss in more detail <a href="/gremlin-chaos-monkey/origin-netflix#failure-injection-testing">over here</a>.</p>

<h4 id="doctor-monkey">Doctor Monkey</h4>

<p><strong>Doctor Monkey</strong> performs instance health checks and monitors vital metrics like CPU load, memory usage, and so forth.  Any instance deemed unhealthy by Doctor Monkey is removed from service.</p>

<p>Doctor Monkey is not open-sourced, but most of its functionality is built into other tools like Spinnaker, which includes a load balancer health checker, so instances that fail certain criteria are terminated and immediately replaced by new ones.  Check out the <a href="/gremlin-chaos-monkey/advanced-tips#how-to-deploy-spinnaker-on-kubernetes">How to Deploy Spinnaker on Kubernetes</a> tutorial to see this in action!</p>

<h3 id="10-18-monkey">10-18 Monkey</h3>

<p>The <strong>10-18 Monkey</strong> (aka <code class="highlighter-rouge">l10n-i18n</code>) detects run time issues and problematic configurations within instances that are accessible across multiple geographic regions, and which are serving unique localizations.</p>

<h2 id="simian-chaos-strategies">Simian Chaos Strategies</h2>

<p>The original Chaos Monkey was built to inject failure by terminating EC2 instances.  However, this provides an exceptionally limited simulation scope, so Chaos <strong>Strategies</strong> were added to the Simian Army toolset.  Most of these strategies are disabled by default, but they can be toggled in the <code class="highlighter-rouge">SimianArmy/src/main/resources/chaos.properties</code> configuration file.</p>

<h3 id="instance-shutdown-simius-mortus">Instance Shutdown (Simius Mortus)</h3>

<p>Shuts down an EC2 instance.</p>

<h4 id="configuration-key">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.shutdowninstance</code></p>

<h3 id="network-traffic-blocker-simius-quies">Network Traffic Blocker (Simius Quies)</h3>

<p>Blocks network traffic by applying restricted security access to the instance.  This strategy only applies to VPC instances.</p>

<h4 id="configuration-key-1">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.blockallnetworktraffic</code></p>

<h3 id="ebs-volume-detachment-simius-amputa">EBS Volume Detachment (Simius Amputa)</h3>

<p>Detaches all EBS volumes from the instance to simulate I/O failure.</p>

<h4 id="configuration-key-2">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.detachvolumes</code></p>

<h3 id="burn-cpu-simius-cogitarius">Burn-CPU (Simius Cogitarius)</h3>

<p>Heavily utilizes the instance CPU.</p>

<h4 id="configuration-key-3">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.burncpu</code></p>

<h3 id="burn-io-simius-occupatus">Burn-IO (Simius Occupatus)</h3>

<p>Heavily utilizes the instance disk.</p>

<h4 id="configuration-key-4">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.shutdowninstance</code></p>

<h3 id="fill-disk-simius-plenus">Fill Disk (Simius Plenus)</h3>

<p>Attempts to fill the instance disk.</p>

<h4 id="configuration-key-5">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.shutdowninstance</code></p>

<h3 id="kill-processes-simius-delirius">Kill Processes (Simius Delirius)</h3>

<p>Kills all Python and Java processes once every second.</p>

<h4 id="configuration-key-6">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.killprocesses</code></p>

<h3 id="null-route-simius-desertus">Null-Route (Simius Desertus)</h3>

<p>Severs all instance-to-instance network traffic by null-routing the <code class="highlighter-rouge">10.0.0.0/8</code> network.</p>

<h4 id="configuration-key-7">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.nullroute</code></p>

<h3 id="fail-dns-simius-nonomenius">Fail DNS (Simius Nonomenius)</h3>

<p>Prevents all DNS requests by blocking TCP and UDP traffic to port <code class="highlighter-rouge">53</code>.</p>

<h4 id="configuration-key-8">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.faildns</code></p>

<h3 id="fail-ec2-api-simius-noneccius">Fail EC2 API (Simius Noneccius)</h3>

<p>Halts all EC2 API communication by adding invalid entries to <code class="highlighter-rouge">/etc/hosts</code>.</p>

<h4 id="configuration-key-9">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.failec2</code></p>

<h3 id="fail-s3-api-simius-amnesius">Fail S3 API (Simius Amnesius)</h3>

<p>Stops all S3 API traffic by placing invalid entries in <code class="highlighter-rouge">/etc/hosts</code>.</p>

<h4 id="configuration-key-10">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.fails3</code></p>

<h3 id="fail-dynamodb-api-simius-nodynamus">Fail DynamoDB API (Simius Nodynamus)</h3>

<p>Prevents all DynamoCB API communication by adding invalid entries to <code class="highlighter-rouge">/etc/hosts</code>.</p>

<h4 id="configuration-key-11">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.faildynamodb</code></p>

<h3 id="network-corruption-simius-politicus">Network Corruption (Simius Politicus)</h3>

<p>Corrupts the majority of network packets using a traffic shaping API.</p>

<h4 id="configuration-key-12">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.networkcorruption</code></p>

<h3 id="network-latency-simius-tardus">Network Latency (Simius Tardus)</h3>

<p>Delays all network packets by <code class="highlighter-rouge">1</code> second, plus or minus half a second, using a traffic shaping API.</p>

<h4 id="configuration-key-13">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.networklatency</code></p>

<h3 id="network-loss-simius-perditus">Network Loss (Simius Perditus)</h3>

<p>Drops a fraction of all network packets by using a traffic shaping API.</p>

<h4 id="configuration-key-14">Configuration Key</h4>

<p><code class="highlighter-rouge">simianarmy.chaos.networkloss</code></p>

<h2 id="using-simian-army-tools">Using Simian Army Tools</h2>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
  <li><a href="/gremlin-chaos-monkey/advanced-tips#how-to-install-aws-cli">Install and Setup AWS CLI</a></li>
  <li><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener noreferrer">Install the Java JDK</a></li>
</ul>

<h3 id="installation">Installation</h3>

<ol>
  <li>
    <p>Start by creating an AWS Auto Scaling launch configuration.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> aws autoscaling create-launch-configuration <span class="nt">--launch-configuration-name</span> simian-lc <span class="nt">--instance-type</span> t2.micro <span class="nt">--image-id</span> ami-51537029
</code></pre></div>    </div>
  </li>
  <li>
    <p>Now use the generated <code class="highlighter-rouge">simian-lc</code> configuration to create an Auto Scaling Group.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> aws autoscaling create-auto-scaling-group <span class="nt">--auto-scaling-group-name</span> monkey-target <span class="nt">--launch-configuration-name</span> simian-lc <span class="nt">--availability-zones</span> us-west-2a <span class="nt">--min-size</span> 1 <span class="nt">--max-size</span> 2
</code></pre></div>    </div>
  </li>
  <li>
    <p><em>(Optional)</em> Check that the scaling group was successfully added.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> aws autoscaling describe-auto-scaling-groups <span class="nt">--auto-scaling-group-names</span> monkey-target <span class="nt">--output</span> json
</code></pre></div>    </div>

    <div class="language-json highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"AutoScalingGroups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
             </span><span class="s2">"AutoScalingGroupARN"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:autoscaling:us-west-2:123456789012:autoScalingGroup:918a23bc-ea5a-4def-bc68-5356becfd35d:autoScalingGroupName/monkey-target"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"ServiceLinkedRoleARN"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::123456789012:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"TargetGroupARNs"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
             </span><span class="s2">"SuspendedProcesses"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
             </span><span class="s2">"DesiredCapacity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
             </span><span class="s2">"Tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
             </span><span class="s2">"EnabledMetrics"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
             </span><span class="s2">"LoadBalancerNames"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
             </span><span class="s2">"AutoScalingGroupName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monkey-target"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"DefaultCooldown"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
             </span><span class="s2">"MinSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
             </span><span class="s2">"Instances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                 </span><span class="p">{</span><span class="w">
                     </span><span class="s2">"ProtectedFromScaleIn"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                     </span><span class="s2">"AvailabilityZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"us-west-2a"</span><span class="p">,</span><span class="w">
                     </span><span class="s2">"InstanceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"i-0e47c9f0df5150263"</span><span class="p">,</span><span class="w">
                     </span><span class="s2">"HealthStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Healthy"</span><span class="p">,</span><span class="w">
                     </span><span class="s2">"LifecycleState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pending"</span><span class="p">,</span><span class="w">
                     </span><span class="s2">"LaunchConfigurationName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"simian-lc"</span><span class="w">
                 </span><span class="p">}</span><span class="w">
             </span><span class="p">],</span><span class="w">
             </span><span class="s2">"MaxSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
             </span><span class="s2">"VPCZoneIdentifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
             </span><span class="s2">"HealthCheckGracePeriod"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
             </span><span class="s2">"TerminationPolicies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                 </span><span class="s2">"Default"</span><span class="w">
             </span><span class="p">],</span><span class="w">
             </span><span class="s2">"LaunchConfigurationName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"simian-lc"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"CreatedTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-09-13T03:43:13.503Z"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"AvailabilityZones"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                 </span><span class="s2">"us-west-2a"</span><span class="w">
             </span><span class="p">],</span><span class="w">
             </span><span class="s2">"HealthCheckType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC2"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"NewInstancesProtectedFromScaleIn"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
         </span><span class="p">}</span><span class="w">
     </span><span class="p">]</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>
    <p><em>(Optional)</em> Add any additional, manually-propagated EC2 instances you might need, using the same <code class="highlighter-rouge">ami-51537029</code> image used for the auto-scaling group.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> aws ec2 run-instances <span class="nt">--image-id</span> ami-51537029 <span class="nt">--count</span> 1 <span class="nt">--instance-type</span> t2.micro <span class="nt">--key-name</span> id_rsa
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="c"># OUTPUT</span>
 123456789012 r-0ade24933c15617ba
 INSTANCES 0   x86_64   False	xen	ami-51537029	i-062b161f4a1cddbb7	t2.micro	id_rsa	2018-09-13T03:50:07.000Z	ip-172-31-30-145.us-west-2.compute.internal	172.31.30.145		/dev/sda1	ebs	True		subnet-27c73d43	hvmvpc-0967976d
</code></pre></div>    </div>
  </li>
  <li>
    <p><em>(Optional)</em> Attach any manually-created EC2 instances to the <code class="highlighter-rouge">monkey-target</code> auto-scaling group.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> aws autoscaling attach-instances <span class="nt">--instance-ids</span> i-062b161f4a1cddbb7 <span class="nt">--auto-scaling-group-name</span> monkey-target
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="receiving-email-notifications">Receiving Email Notifications</h4>

<ol>
  <li>
    <p><em>(Optional)</em> If you want to receive email notifications you’ll need to add an email address identity to AWS Simple Email Service (SES).</p>

    <div class="premonition warning modified">
<div class="fa fa-exclamation-circle"></div>
<div class="content">
<p class="header">us-east-1 Region only</p>
<p>At present, SimianArmy only attempts to send email notifications through the AWS <code class="highlighter-rouge">us-east-1</code> region, regardless of configuration settings.  Thus, be sure the recipient address is in the <code class="highlighter-rouge">us-east-1</code> AWS region.</p>
</div>
</div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> aws ses verify-email-identity <span class="nt">--email-address</span> me@example.com <span class="nt">--region</span> us-east-1
</code></pre></div>    </div>
  </li>
  <li>Open your email client and click the verification link.</li>
  <li>
    <p>Verify the address was successfully added to the proper SES region.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> aws ses list-identities <span class="nt">--region</span><span class="o">=</span>us-east-1
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="c"># OUTPUT</span>
 IDENTITIES    me@example.com
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="configuration">Configuration</h3>

<ol>
  <li>
    <p>Clone the SimianArmy GitHub repository into the local directory of your choice.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> git clone git://github.com/Netflix/SimianArmy.git ~/SimianArmy
</code></pre></div>    </div>
  </li>
  <li>
    <p><em>(Optional)</em> Modify the <code class="highlighter-rouge">client.properties</code> configuration to change AWS connection settings.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> nano ~/SimianArmy/src/main/resources/client.properties
</code></pre></div>    </div>
  </li>
  <li>
    <p><em>(Optional)</em> Modify the <code class="highlighter-rouge">simianarmy.properties</code> configuration to change general SimianArmy behavior.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> nano ~/SimianArmy/src/main/resources/simianarmy.properties
</code></pre></div>    </div>
  </li>
  <li>
    <p><em>(Optional)</em> Modify the <code class="highlighter-rouge">chaos.properties</code> configuration to change Chaos Monkey’s behavior.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> nano ~/SimianArmy/src/main/resources/chaos.properties
</code></pre></div>    </div>

    <ul>
      <li>
        <p>By default, Chaos Monkey won’t target AWS Auto Scaling Groups unless you explicitly enable them.  If desired, enable the recently added <code class="highlighter-rouge">monkey-target</code> ASG by adding the following setting.</p>

        <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  simianarmy.chaos.ASG.monkey-target.enabled <span class="o">=</span> <span class="nb">true</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p><em>(Optional)</em> Modify the <code class="highlighter-rouge">janitor.properties</code> configuration to change <a href="/gremlin-chaos-monkey/simian-army#janitor-monkey">Janitor Monkey’s</a> behavior.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> nano ~/SimianArmy/src/main/resources/janitormonkey.properties
</code></pre></div>    </div>
  </li>
  <li>
    <p><em>(Optional)</em> If you opted to receive SES notifications, specify the recipient email address within each appropriate configuration file.  The following example modifies the <code class="highlighter-rouge">conformity.properties</code> file.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> nano ~/SimianArmy/src/main/resources/conformity.properties
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="c"># The property below needs to be a valid email address to receive the summary email of Conformity Monkey</span>
 <span class="c"># after each run</span>
 simianarmy.conformity.summaryEmail.to <span class="o">=</span> foo@bar.com

 <span class="c"># The property below needs to be a valid email address to send notifications for Conformity monkey</span>
 simianarmy.conformity.notification.defaultEmail <span class="o">=</span> foo@bar.com

 <span class="c"># The property below needs to be a valid email address to send notifications for Conformity Monkey</span>
 simianarmy.conformity.notification.sourceEmail <span class="o">=</span> foo@bar.com
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="executing-experiments">Executing Experiments</h3>

<p>Run the included Gradle Jetty server to build and execute the Simian Army configuration.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./gradlew jettyRun
</code></pre></div></div>

<p>After the build completes you’ll see log output from each enabled Simian Army members, including <strong>Chaos Monkey 1.X</strong>.</p>

<h4 id="using-chaos-monkey-1x">Using Chaos Monkey 1.X</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2018-09-11 14:31:06.625 - INFO  BasicChaosMonkey - <span class="o">[</span>BasicChaosMonkey.java:276] Group monkey-target <span class="o">[</span><span class="nb">type </span>ASG] enabled <span class="o">[</span>prob 1.0]
2018-09-11 14:31:06.625 - INFO  BasicChaosInstanceSelector - <span class="o">[</span>BasicChaosInstanceSelector.java:89] Group monkey-target <span class="o">[</span><span class="nb">type </span>ASG] got lucky: 0.9183174043024381 <span class="o">&gt;</span> 0.16666666666666666
2018-09-11 14:31:06.626 - INFO  Monkey - <span class="o">[</span>Monkey.java:138] Reporting what I did...
</code></pre></div></div>

<p>This older version of Chaos Monkey uses probability to pseudo-randomly determine when an instance should be terminated.  The output above shows that <code class="highlighter-rouge">0.918...</code> exceeds the required chance of <code class="highlighter-rouge">1/6</code>, so nothing happened.  However, running <code class="highlighter-rouge">./gradlew jettyRun</code> a few times will eventually result in a success.  If necessary, you can also modify the probability settings in the <code class="highlighter-rouge">chaos.properties</code> file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2018-09-11 14:33:06.625 - INFO  BasicChaosMonkey - <span class="o">[</span>BasicChaosMonkey.java:89] Group monkey-target <span class="o">[</span><span class="nb">type </span>ASG] enabled <span class="o">[</span>prob 1.0]
2018-09-11 14:33:06.625 - INFO  BasicChaosMonkey - <span class="o">[</span>BasicChaosMonkey.java:280] leashed ChaosMonkey prevented from killing i-057701c3ab4f1e5a4 from group monkey-target <span class="o">[</span>ASG], <span class="nb">set </span>simianarmy.chaos.leashed<span class="o">=</span><span class="nb">false</span>
</code></pre></div></div>

<p>By default, the <a href="https://github.com/Netflix/SimianArmy/wiki/Chaos-Settings#simianarmychaosleashed" target="_blank" rel="noopener noreferrer"><code class="highlighter-rouge">simianarmy.chaos.leashed = true</code></a> property in <code class="highlighter-rouge">chaos.properties</code> prevents Chaos Monkey from terminating instances, as indicated in the above log output.  However, changing this property to <code class="highlighter-rouge">false</code> allows Chaos Monkey to terminate the selected instance.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2018-09-11 14:33:56.225 - INFO  BasicChaosMonkey - <span class="o">[</span>BasicChaosMonkey.java:89] Group monkey-target <span class="o">[</span><span class="nb">type </span>ASG] enabled <span class="o">[</span>prob 1.0]
2018-09-11 14:33:56.225 - INFO  BasicChaosMonkey - <span class="o">[</span>BasicChaosMonkey.java:280] Terminated i-057701c3ab4f1e5a4 from group monkey-target <span class="o">[</span>ASG]
</code></pre></div></div>

<h2 id="next-steps">Next Steps</h2>

<p>Now that you’ve learned about the old school Simian Army, check out our <a href="/gremlin-chaos-monkey/developer-tutorial">Developer Tutorial</a> to find out how to install and use the newer Chaos Monkey toolset.  You can also learn about the many <a href="/gremlin-chaos-monkey/alternatives">alternatives to Chaos Monkey</a>, in which we shed light on tools and services designed to bring intelligent failure injection and powerful Chaos Engineering practices to your fingertips.</p>


        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-09-12T00:00:00-07:00">September 12, 2018</time></p>
        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>
    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
    
    
    
    
    
    <li><a href="/gremlin-chaos-monkey/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">© 2018 Gabe Wyatt</div>

      </footer>
    </div>

    
  <script src="/gremlin-chaos-monkey/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>








  </body>
</html>